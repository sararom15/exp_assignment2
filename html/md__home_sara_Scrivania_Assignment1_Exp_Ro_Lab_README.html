<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Exp_Assignment2: Assignment 1 - Experimental Robotics Laboratory</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Exp_Assignment2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Assignment 1 - Experimental Robotics Laboratory </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Behavioral Architecture</h1>
<p>Assuming a Robot, simulating a pet, that interacts with a human and moves in a discrete 2D environment. The robot may have three behaviors : normal (in which it moves randomly), sleep (in which it gets the home position, sleeps for a time and returns in normal behavior) and play (in which it goes in person location, waits for a poiting gesture, goes in the pointed location, comes back to the person and waits for the next pointing gestures. After some time it returns to the normal behavior). The human can interact by pointing gestures and speech.</p>
<h2>ROS Architecture</h2>
<p>The system is composed by 3 nodes:"Commander" node, "state_machine" node and "Display" node, and a Launch file. The rqt_graph is showed.</p>
<div class="image">
<img src="https://github.com/sararom15/Assignment1_Exp_Ro_Lab/blob/main/Images/rqt_graph2.png"/>
</div>
 <h3>Commander node</h3>
<p>The node simulates user action. Firstly it chooses randomly what the robot must perform: sleep or play. The command (std_msgs/String) is published on a Topic ("/Command"). In case the play behavior is selected, the node generates randomly the location of the user and the Pointing Gesture. These poses (geometry_msgs/Point) are published on two topics ("/PersonPosition" and "/PointingGesture").</p>
<h3>State machine node</h3>
<p>The node implements a state machine in which the three possible behaviors are defined.</p>
<div class="image">
<img src="https://github.com/sararom15/Assignment1_Exp_Ro_Lab/blob/main/Images/state%20machine.png"/>
</div>
 <p>The state machine starts with a Normal behavior state, and it can transit to sleep state or to play state, or it can keep a normal state. The command to switch to another state is received by "Commander" node by the topic "/Command". When it is in a Play state or in a Sleep state, it can just go back in the normal state. The ROS message geometry_msgs/Point is used to rapresent the 2D robot's position (leaving z component always equal to 0). The target position belongs exclusively to the map (11x11 grid). In the normal state, they are generated by "GenerateRandomPosition" function; in the play state, the person position and pointing gesture are received by "Commander" node through two topics; while in the sleep state the home position is defined (1,1). For each state, the target positions are sent to the "display" node, publishing them on "NewTargetPosition" topic. When this happens, the system waits for a default time (4 seconds) until the robot reaches the desired pose. This means that further targets has not been accepted while the robot is moving.</p>
<h3>Display node</h3>
<p>The node is a simple simulator; it subscribes to a "newTargetPosition" topic and wait for a message. When the target is received, it prints on terminal what the robot is doing and the behavior state.</p>
<h2>Installation</h2>
<p>The first thing to do, after having cloned the repository in the Ros workspace, is to build the package, using the following commands in the shell: </p><pre class="fragment">```
cd "yourWorkspace"_ws
catkin_make

```
</pre><p> To run the system: </p><pre class="fragment">```
roslaunch assignment1_ExRoLab ass1.launch

```
</pre><p> In another terminal run: </p><pre class="fragment">```
rosrun assignment1_ExRoLab Commander.py 

```
</pre><p>To visualize the smach viewer: </p><pre class="fragment">```
rosrun smach_viewer smach_viewer.py

```
</pre><h2>Working Hypothesis</h2>
<p>The assumptions are: 1) When it starts, the normal state preempts other states. 2) From the normal behavior, the robot can play or sleep or stay in normal state yet. 3) The command to go to sleep or play is received by the Commander node. 4) From the play state, as well as from the sleep state, the robot can only go to the normal state. 5) The random position in the normal state is defined by "GenerateRandomPosition" function. 6) The home position is fixed (1,1,0). 7) The person location and the pointing gesture are received by the Commander node. 8) During the execution of one state, after giving a target, the robot waits for a while (predefined time).</p>
<h2>System's features</h2>
<p>The sys can show on the terminal what the robot is doing and the what the behavior's state is executing.</p>
<h2>System's Limitations</h2>
<p>The user actions is randomly defined by the system, and there exists neither a real relationship with the user nor a real pointing gesture. The robot has not a velocity to get him desired target position, and there is not a real simulator to view if the target is achieved.</p>
<h2>Possible technical Improvements</h2>
<p>A possible technical improvements may be: 1) create a real interaction with the user; 2) Implement a real velocity to change the odometry of the robot; 4) Implement a simulator (like Gazebo, Stage, Turtlesim,...).</p>
<h2>Author</h2>
<p>Sara Romano - <a href="#" onclick="location.href='mai'+'lto:'+'sar'+'a.'+'rom'+'an'+'o.1'+'5@'+'gma'+'il'+'.co'+'m'; return false;">sara.<span style="display: none;">.nosp@m.</span>roma<span style="display: none;">.nosp@m.</span>no.15<span style="display: none;">.nosp@m.</span>@gma<span style="display: none;">.nosp@m.</span>il.co<span style="display: none;">.nosp@m.</span>m</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
